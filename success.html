<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Dashboard</title>
</head>
<body>
<h2>Welcome to Secure Dashboard</h2>
<button onclick="logout()">Logout</button>

<script>
const WEBAPP="https://script.google.com/macros/s/AKfycbxNvLwZx-OwJpTswHn0n49lm0mJmj4z03_c9GVzAmY7xYrwUGlvIUdqdADFQPaV0RFP/exec";

async function checkSession(){
 const token=localStorage.getItem("sessionToken");
 if(!token) window.location="index.html";

 const res=await fetch(WEBAPP,{
   method:"POST",
   headers:{"Content-Type":"application/json"},
   body:JSON.stringify({action:"verifySession",token:token})
 });

 const data=await res.json();
 if(!data.success) window.location="index.html";
}

function logout(){
 localStorage.removeItem("sessionToken");
 window.location="index.html";
}

checkSession();
</script>
</body>
</html>
